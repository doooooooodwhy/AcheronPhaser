<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acheron Phaser - Anonymous View</title>
    <style>
        /* Holy Unblocker inspired dark theme */
        :root {
            --primary-red: #FF6B6B;
            --deep-red: #E55555;
            --dark-bg: #0F0F0F;
            --darker-bg: #0A0A0A;
            --card-bg: #1A1A1A;
            --border-color: #2A2A2A;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --accent-color: #FF6B6B;
            --success-color: #4CAF50;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            background: var(--darker-bg);
            padding: 20px 0;
            border-bottom: 1px solid var(--border-color);
            box-shadow: var(--shadow);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: var(--primary-red);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
        }

        .logo-text h1 {
            color: var(--text-primary);
            font-size: 24px;
            font-weight: 600;
        }

        .logo-text p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* Search Section */
        .search-section {
            flex: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            width: 100%;
        }

        .search-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 40px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .search-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .search-header h2 {
            color: var(--text-primary);
            font-size: 28px;
            margin-bottom: 10px;
        }

        .search-header p {
            color: var(--text-secondary);
            font-size: 16px;
        }

        /* Search Input */
        .search-container {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .search-dropdown {
            padding: 16px 20px;
            background: var(--darker-bg);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            min-width: 150px;
        }

        .search-dropdown:focus {
            outline: none;
            border-color: var(--primary-red);
        }

        .search-input-group {
            flex: 1;
            display: flex;
            gap: 10px;
        }

        .search-input {
            flex: 1;
            padding: 16px 20px;
            background: var(--darker-bg);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            transition: var(--transition);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-red);
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.2);
        }

        .btn-search {
            background: var(--primary-red);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            min-width: 100px;
        }

        .btn-search:hover {
            background: var(--deep-red);
            transform: translateY(-2px);
        }

        /* Search Results */
        .search-results {
            display: none;
            margin-top: 30px;
        }

        .search-results.active {
            display: block;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .results-count {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .btn-back {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: var(--transition);
        }

        .btn-back:hover {
            background: var(--primary-red);
            border-color: var(--primary-red);
        }

        .result-item {
            background: var(--darker-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: var(--transition);
        }

        .result-item:hover {
            border-color: var(--primary-red);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .result-title {
            color: var(--primary-red);
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .result-url {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 10px;
            word-break: break-all;
        }

        .result-desc {
            color: var(--text-primary);
            font-size: 14px;
            line-height: 1.5;
        }

        /* Anonymous View Window */
        .anonymous-view {
            display: none;
            background: var(--card-bg);
            border-radius: 16px;
            border: 1px solid var(--border-color);
            overflow: hidden;
            margin-top: 30px;
        }

        .anonymous-view.active {
            display: block;
        }

        .view-header {
            background: var(--darker-bg);
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .view-title {
            color: var(--text-primary);
            font-size: 16px;
            font-weight: 600;
        }

        .view-url {
            color: var(--text-secondary);
            font-size: 14px;
            margin-left: 10px;
        }

        .view-actions {
            display: flex;
            gap: 10px;
        }

        .view-btn {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: var(--transition);
        }

        .view-btn:hover {
            background: var(--primary-red);
            border-color: var(--primary-red);
        }

        .view-content {
            height: 600px;
            overflow: auto;
            background: white;
            color: black;
        }

        .view-content iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border-color);
            border-top: 3px solid var(--primary-red);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Error Message */
        .error-message {
            background: rgba(244, 67, 54, 0.1);
            border: 1px solid var(--error-color);
            border-radius: 8px;
            padding: 15px;
            margin: 20px;
            color: var(--error-color);
            text-align: center;
        }

        /* Footer */
        .footer {
            background: var(--darker-bg);
            padding: 30px 0;
            border-top: 1px solid var(--border-color);
            text-align: center;
            margin-top: auto;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .footer-text {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .search-container {
                flex-direction: column;
            }

            .search-dropdown {
                width: 100%;
            }

            .view-content {
                height: 400px;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">üî¥</div>
                    <div class="logo-text">
                        <h1>Acheron Phaser</h1>
                        <p>Anonymous View Proxy</p>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="btn-header" onclick="clearResults()">üè† Home</button>
                    <button class="btn-header" onclick="toggleTheme()">üåô Theme</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="search-section">
            <!-- Search Card -->
            <div class="search-card">
                <div class="search-header">
                    <h2>Anonymous Search & Browse</h2>
                    <p>Search and browse websites anonymously - your browser never connects directly</p>
                </div>

                <!-- Search Input -->
                <div class="search-container">
                    <select id="searchEngine" class="search-dropdown">
                        <option value="google">üîç Google</option>
                        <option value="duckduckgo">ü¶Ü DuckDuckGo</option>
                        <option value="bing">üÖ±Ô∏è Bing</option>
                        <option value="yahoo">üåê Yahoo</option>
                        <option value="brave">ü¶Å Brave</option>
                    </select>
                    <div class="search-input-group">
                        <input 
                            type="text" 
                            id="searchInput" 
                            class="search-input" 
                            placeholder="Search for anything or enter a website URL..."
                            autocomplete="off"
                        >
                        <button class="btn-search" onclick="performSearch()">Search</button>
                    </div>
                </div>
            </div>

            <!-- Search Results -->
            <div id="searchResults" class="search-results">
                <div class="results-header">
                    <div>
                        <span class="results-count" id="resultsCount">Loading results...</span>
                        <span id="searchQuery" style="color: var(--text-secondary); margin-left: 10px;"></span>
                    </div>
                    <button class="btn-back" onclick="clearResults()">‚Üê Back to Search</button>
                </div>
                <div id="resultsContainer"></div>
            </div>

            <!-- Anonymous View Window -->
            <div id="anonymousView" class="anonymous-view">
                <div class="view-header">
                    <div>
                        <span class="view-title">Anonymous View</span>
                        <span class="view-url" id="viewUrl"></span>
                    </div>
                    <div class="view-actions">
                        <button class="view-btn" onclick="refreshAnonymousView()">üîÑ Refresh</button>
                        <button class="view-btn" onclick="closeAnonymousView()">‚úï Close</button>
                    </div>
                </div>
                <div class="view-content" id="viewContent">
                    <div class="loading-overlay" id="viewLoading">
                        <div class="loading-spinner"></div>
                        <div style="color: white;">Loading page anonymously...</div>
                    </div>
                    <iframe id="anonymousFrame" class="hidden"></iframe>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-text">
                    ¬© 2024 Acheron Phaser | Anonymous View Proxy | Your connection is private and secure
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Acheron Phaser Anonymous View - Startpage-style functionality
        class AnonymousView {
            constructor() {
                this.currentSearchEngine = 'google';
                this.lastResults = [];
                this.currentViewUrl = '';
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.loadPreferences();
                console.log('üî¥ Acheron Phaser Anonymous View initialized');
            }

            setupEventListeners() {
                const searchInput = document.getElementById('searchInput');
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.performSearch();
                    }
                });

                const searchEngine = document.getElementById('searchEngine');
                searchEngine.addEventListener('change', (e) => {
                    this.currentSearchEngine = e.target.value;
                    localStorage.setItem('searchEngine', this.currentSearchEngine);
                });
            }

            loadPreferences() {
                const savedEngine = localStorage.getItem('searchEngine');
                if (savedEngine) {
                    this.currentSearchEngine = savedEngine;
                    document.getElementById('searchEngine').value = savedEngine;
                }
            }

            async performSearch() {
                const query = document.getElementById('searchInput').value.trim();
                if (!query) return;

                this.showSearchResults();
                document.getElementById('searchQuery').textContent = `"${query}"`;
                document.getElementById('resultsCount').textContent = 'Searching...';

                try {
                    // Simulate search results (in real implementation, this would call your server)
                    const results = await this.simulateSearch(query);
                    this.displayResults(results);
                } catch (error) {
                    this.showError('Search failed. Please try again.');
                }
            }

            async simulateSearch(query) {
                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 1000));

                // Mock search results based on query
                const mockResults = [
                    {
                        title: `${query} - Search Results`,
                        url: `https://example.com/search?q=${encodeURIComponent(query)}`,
                        description: `Find the best information about ${query} on the web.`
                    },
                    {
                        title: `${query} - Wikipedia`,
                        url: `https://wikipedia.org/wiki/${encodeURIComponent(query)}`,
                        description: `Learn about ${query} from the free encyclopedia.`
                    },
                    {
                        title: `${query} - Official Site`,
                        url: `https://${query.toLowerCase().replace(/\s+/g, '')}.com`,
                        description: `Visit the official website for ${query}.`
                    },
                    {
                        title: `${query} - News & Updates`,
                        url: `https://news.google.com/search?q=${encodeURIComponent(query)}`,
                        description: `Latest news and updates about ${query}.`
                    },
                    {
                        title: `${query} - Videos`,
                        url: `https://youtube.com/results?search_query=${encodeURIComponent(query)}`,
                        description: `Watch videos related to ${query}.`
                    }
                ];

                return mockResults;
            }

            displayResults(results) {
                this.lastResults = results;
                const container = document.getElementById('resultsContainer');
                const resultsCount = document.getElementById('resultsCount');
                
                resultsCount.textContent = `Found ${results.length} results`;
                container.innerHTML = '';

                results.forEach((result, index) => {
                    const resultElement = this.createResultElement(result, index);
                    container.appendChild(resultElement);
                });
            }

            createResultElement(result, index) {
                const element = document.createElement('div');
                element.className = 'result-item fade-in';
                element.style.animationDelay = `${index * 0.1}s`;
                
                element.innerHTML = `
                    <div class="result-title">${this.escapeHtml(result.title)}</div>
                    <div class="result-url">${this.escapeHtml(result.url)}</div>
                    <div class="result-desc">${this.escapeHtml(result.description)}</div>
                `;

                element.addEventListener('click', () => {
                    this.openAnonymousView(result.url, result.title);
                });

                return element;
            }

            async openAnonymousView(url, title) {
                this.currentViewUrl = url;
                
                // Show anonymous view window
                document.getElementById('anonymousView').classList.add('active');
                document.getElementById('viewUrl').textContent = url;
                document.getElementById('viewLoading').style.display = 'flex';
                
                try {
                    // Request anonymous view from server
                    const anonymousUrl = await this.createAnonymousUrl(url);
                    
                    // Load in iframe
                    const frame = document.getElementById('anonymousFrame');
                    frame.src = anonymousUrl;
                    frame.classList.remove('hidden');
                    
                    // Hide loading after frame starts loading
                    frame.onload = () => {
                        document.getElementById('viewLoading').style.display = 'none';
                    };
                    
                } catch (error) {
                    this.showViewError('Failed to load page anonymously');
                }
            }

            createAnonymousUrl(targetUrl) {
                // Create anonymous view URL like your example: /proxy/crazygames.com
                // This will be handled by the server to fetch content anonymously
                
                // Extract domain from URL
                let domain;
                try {
                    const url = new URL(targetUrl);
                    domain = url.hostname;
                } catch {
                    // If not a full URL, assume it's a domain
                    domain = targetUrl.replace(/^https?:\/\//, '').split('/')[0];
                }
                
                // Return anonymous view URL format
                return `/view/${domain}`;
            }

            closeAnonymousView() {
                document.getElementById('anonymousView').classList.remove('active');
                document.getElementById('anonymousFrame').src = '';
                document.getElementById('anonymousFrame').classList.add('hidden');
                this.currentViewUrl = '';
            }

            refreshAnonymousView() {
                if (this.currentViewUrl) {
                    this.openAnonymousView(this.currentViewUrl, 'Refreshed');
                }
            }

            clearResults() {
                document.getElementById('searchResults').classList.remove('active');
                document.getElementById('anonymousView').classList.remove('active');
                document.getElementById('searchInput').value = '';
                document.getElementById('resultsContainer').innerHTML = '';
                document.getElementById('anonymousFrame').src = '';
                document.getElementById('anonymousFrame').classList.add('hidden');
                this.currentViewUrl = '';
            }

            showSearchResults() {
                document.getElementById('searchResults').classList.add('active');
            }

            showError(message) {
                const container = document.getElementById('resultsContainer');
                container.innerHTML = `
                    <div class="error-message">
                        <div>‚ùå ${message}</div>
                        <button class="btn-back" onclick="clearResults()" style="margin-top: 15px;">Go Back</button>
                    </div>
                `;
                this.showSearchResults();
            }

            showViewError(message) {
                document.getElementById('viewLoading').style.display = 'none';
                const content = document.getElementById('viewContent');
                content.innerHTML = `
                    <div class="error-message" style="margin: 20px;">
                        <div>‚ùå ${message}</div>
                        <button class="view-btn" onclick="refreshAnonymousView()" style="margin-top: 15px;">Try Again</button>
                    </div>
                `;
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        }

        // Global functions
        function performSearch() {
            window.anonymousView.performSearch();
        }

        function clearResults() {
            window.anonymousView.clearResults();
        }

        function closeAnonymousView() {
            window.anonymousView.closeAnonymousView();
        }

        function refreshAnonymousView() {
            window.anonymousView.refreshAnonymousView();
        }

        function toggleTheme() {
            const body = document.body;
            const currentBg = getComputedStyle(body).backgroundColor;
            if (currentBg === 'rgb(15, 15, 15)' || currentBg === '#0F0F0F') {
                body.style.background = '#f5f5f5';
                body.style.color = '#333';
                document.querySelectorAll('.header, .search-card, .result-item, .anonymous-view').forEach(el => {
                    el.style.background = '#ffffff';
                    el.style.color = '#333333';
                    el.style.borderColor = '#e0e0e0';
                });
            } else {
                body.style.background = '';
                body.style.color = '';
                document.querySelectorAll('.header, .search-card, .result-item, .anonymous-view').forEach(el => {
                    el.style.background = '';
                    el.style.color = '';
                    el.style.borderColor = '';
                });
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            window.anonymousView = new AnonymousView();
        });
    </script>
</body>
</html>
